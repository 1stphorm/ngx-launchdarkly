!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("launchdarkly-js-client-sdk")):"function"==typeof define&&define.amd?define("ngx-launchdarkly",["exports","rxjs","rxjs/operators","@angular/core","launchdarkly-js-client-sdk"],t):t(e["ngx-launchdarkly"]={},e.rxjs,e.rxjs.operators,e.ng.core,e.launchdarklyJsClientSdk)}(this,function(e,i,n,t,r){"use strict";var o="LAUNCH_DARKLY_INITIALIZER",a="LAUNCH_DARKLY_API_KEY",s="LAUNCH_DARKLY_OPTIONS",c=(l.prototype._setFlags=function(e){this._flags=e,this.flagChange.next(this._flags)},l.prototype.changeUser=function(e){var t=this._ldClient.getUser();t&&t.key!==e&&("Anonymous"!==e?this._ldClient.identify({key:e,name:e,anonymous:!1}):this._ldClient.identify({key:"anon",anonymous:!0}))},l.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:Function,decorators:[{type:t.Inject,args:[o]}]},{type:String,decorators:[{type:t.Inject,args:[a]}]},{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]}]},l.ngInjectableDef=t.defineInjectable({factory:function(){return new l(t.inject("LAUNCH_DARKLY_INITIALIZER"),t.inject("LAUNCH_DARKLY_API_KEY"),t.inject("LAUNCH_DARKLY_OPTIONS",8))},token:l,providedIn:"root"}),l);function l(e,t,n){var r=this;this.flagChange=new i.Subject,this._flags={},this._ldClient=e(t,{key:"anon",anonymous:!0},n),this._ldClient.on("initialized",function(e){return r._setFlags(e)}),this._ldClient.on("change",function(e){return r._setFlags(e)}),this._ldClient.on("error",function(e){return r.flagChange.error(e)})}var u=function y(){this.$implicit=null,this.ngxLanchDarkly=null},h=(Object.defineProperty(p.prototype,"ngxLaunchDarkly",{set:function(e){if(null!=this._currentFlag||!e)throw new Error("flagName parameter should be bound once");this._currentFlag=e,this._startSubscription()},enumerable:!0,configurable:!0}),p.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):(this._viewContainer.clear(),this._thenViewRef=null)},p.prototype._startSubscription=function(){var t=this;this._flagSubscription=this._ldService.flagChange.pipe(n.map(function(e){return!!e[t._currentFlag]})).subscribe(function(e){t._context.$implicit=t._context.ngxLanchDarkly=e,t._updateView()})},p.prototype.ngOnDestroy=function(){this._flagSubscription.unsubscribe()},p.decorators=[{type:t.Directive,args:[{selector:"[ngxLaunchDarkly]"}]}],p.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:c},{type:t.TemplateRef}]},p.propDecorators={ngxLaunchDarkly:[{type:t.Input}]},p);function p(e,t,n){this._viewContainer=e,this._ldService=t,this._context=new u,this._thenTemplateRef=null,this._thenViewRef=null,this._flagSubscription=i.Subscription.EMPTY,this._thenTemplateRef=n}var _=r.initialize,f=(d.decorators=[{type:t.NgModule,args:[{declarations:[h],imports:[],providers:[{provide:o,useValue:_}],exports:[h]}]}],d);function d(){}e.LAUNCH_DARKLY_INITIALIZER=o,e.LAUNCH_DARKLY_API_KEY=a,e.LAUNCH_DARKLY_OPTIONS=s,e.LaunchDarklyService=c,e.NgxLaunchDarklyContext=u,e.NgxLaunchDarklyDirective=h,e.NgxLaunchDarklyModule=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-launchdarkly.umd.min.js.map